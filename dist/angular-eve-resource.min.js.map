{"version":3,"sources":["angular-eve-resource.js"],"names":["angular","window","document","undefined","module","service","prepareArgs","args","isArray","arguments","Array","prototype","slice","call","map","arg","isFunction","filter","isDefined","val","isUndefined","isString","length","this","query","$and","cond","apply","$or","$eq","key","o","$like","$regex","factory","$resource","url","paramDefaults","actions","options","toJsonReplacer","Resource","toJSON","value","data","forEach","charAt","exists","_id"],"mappings":"CAAE,SAAUA,EAASC,EAAQC,EAAUC,GACnC,YAEJH,GAAQI,OAAO,iCACX,eAGJJ,EAAQI,OAAO,iCACVC,QAAQ,MAAO,WACZ,QAASC,KACL,GAAIC,GAAOP,EAAQQ,QAAQC,UAAU,IAAMA,UAAU,GAAKC,MAAMC,UAAUC,MAAMC,KAAKJ,UACrF,OAAOF,GAAKO,IAAI,SAAUC,GACtB,MAAIf,GAAQgB,WAAWD,GACZA,IAEJA,IACRE,OAAO,SAAUF,GAChB,QAASA,IAIjB,QAASG,GAAWC,GAChB,MAAInB,GAAQoB,YAAYD,IACb,EAEPnB,EAAQqB,SAASF,GACVA,EAAIG,OAAS,GAEjB,EAGXC,KAAKC,OACDC,KAAM,WACF,GAAIC,GAAOpB,EAAYqB,MAAM,KAAMlB,UACnC,OAAOiB,GAAKJ,OAAS,GACjBG,KAAMC,GACNA,EAAK,IAEbE,IAAK,WACD,GAAIF,GAAOpB,EAAYqB,MAAM,KAAMlB,UACnC,OAAOiB,GAAKJ,OAAS,GACjBM,IAAKF,GACLA,EAAK,IAEbG,IAAK,SAAUC,EAAKX,GAChB,GAAIY,EACJ,OAAIb,GAAUY,IAAQZ,EAAUC,IAC5BY,KACAA,EAAED,GAAOX,EACFY,GAHX,QAMJC,MAAO,SAAUF,EAAKX,GAClB,GAAIY,EACJ,OAAIb,GAAUY,IAAQX,GAClBY,KACAA,EAAED,IACEG,OAAQd,GAELY,GALX,WAWhB/B,EAAQI,OAAO,iCACV8B,QAAQ,eAAgB,YAAa,SAASC,GAC3C,MAAO,UAASC,EAAKC,EAAeC,EAASC,EAASC,GAClD,GAAIC,GACAC,CA+BJ,OA7BK1C,GAAQgB,WAAWwB,KAChBxC,EAAQgB,WAAWuB,IACnBC,EAAiBD,EACjBA,MAEAC,EAAiB,SAASV,EAAKa,GAC3B,MAAOA,KAKnBF,EAAWN,EAAUC,EAAKC,EAAeC,EAASC,GAElDG,EAASD,EAAS9B,UAAU+B,OAE5BD,EAAS9B,UAAU+B,OAAS,WACxB,GAAIE,GAAOF,EAAO7B,KAAKU,KAMvB,OAJAvB,GAAQ6C,QAAQD,EAAM,SAASD,EAAOb,GAClCc,EAAKd,GAAyB,MAAlBA,EAAIgB,OAAO,GAAa3C,EAAYqC,EAAeV,EAAKa,KAGjEC,GAGXH,EAAS9B,UAAUoC,OAAS,WACxB,QAASxB,KAAKyB,KAGXP,OAIjBlB,KAAKvB,QAASuB,KAAMA,KAAKrB","file":"angular-eve-resource.min.js","sourcesContent":[";(function (angular, window, document, undefined) {\n    'use strict';\n\nangular.module('com.dailymotion.ngEveResource', [\n    'ngResource'\n]);\n\nangular.module('com.dailymotion.ngEveResource')\n    .service('eve', function () {\n        function prepareArgs () {\n            var args = angular.isArray(arguments[0]) ? arguments[0] : Array.prototype.slice.call(arguments);\n            return args.map(function (arg) {\n                if (angular.isFunction(arg)) {\n                    return arg();\n                }\n                return arg;\n            }).filter(function (arg) {\n                return !!arg;\n            });\n        }\n\n        function isDefined (val) {\n            if (angular.isUndefined(val)) {\n                return false;\n            }\n            if (angular.isString(val)) {\n                return val.length > 0;\n            }\n            return true;\n        }\n\n        this.query = {\n            $and: function () {\n                var cond = prepareArgs.apply(null, arguments);\n                return cond.length > 1 ? {\n                    $and: cond,\n                } : cond[0];\n            },\n            $or: function () {\n                var cond = prepareArgs.apply(null, arguments);\n                return cond.length > 1 ? {\n                    $or: cond,\n                } : cond[0];\n            },\n            $eq: function (key, val) {\n                var o;\n                if (isDefined(key) && isDefined(val)) {\n                    o = {};\n                    o[key] = val;\n                    return o;\n                }\n            },\n            $like: function (key, val) {\n                var o;\n                if (isDefined(key) && val) {\n                    o = {};\n                    o[key] = {\n                        $regex: val\n                    };\n                    return o;\n                }\n            },\n        };\n    });\n\nangular.module('com.dailymotion.ngEveResource')\n    .factory('eveResource', ['$resource', function($resource) {\n        return function(url, paramDefaults, actions, options, toJsonReplacer) {\n            var Resource,\n                toJSON;\n\n            if (!angular.isFunction(toJsonReplacer)) {\n                if (angular.isFunction(options)) {\n                    toJsonReplacer = options;\n                    options = {};\n                } else {\n                    toJsonReplacer = function(key, value) {\n                        return value;\n                    };\n                }\n            }\n\n            Resource = $resource(url, paramDefaults, actions, options);\n\n            toJSON = Resource.prototype.toJSON;\n\n            Resource.prototype.toJSON = function() {\n                var data = toJSON.call(this);\n\n                angular.forEach(data, function(value, key) {\n                    data[key] = key.charAt(0) === '_' ? undefined : toJsonReplacer(key, value);\n                });\n\n                return data;\n            };\n\n            Resource.prototype.exists = function() {\n                return !!this._id;\n            };\n\n            return Resource;\n        };\n    }]);\n\n}(this.angular, this, this.document));\n"],"sourceRoot":"/source/"}