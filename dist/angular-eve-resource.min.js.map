{"version":3,"sources":["angular-eve-resource.js"],"names":["angular","window","document","undefined","module","service","obj","key","comp","val","o","arguments","length","prepareArgs","args","isArray","Array","prototype","slice","call","map","arg","isFunction","filter","simplify","conds","newCond","forEach","cond","concat","push","isDefined","isUndefined","isString","regexValue","match","join","regex","numComparison","num","isNumber","this","query","$and","apply","$or","$eq","$ne","$in","$nin","$like","$regex","$gt","$gte","$lt","$lte","provider","cfg","dateformat","init","config","merge","$get","$window","$resource","format","time","fmt","moment","utc","formatUpdated","_updated","formatCreated","_created","url","paramDefaults","actions","options","toJsonReplacer","Resource","toJSON","value","data","charAt","exists","_id"],"mappings":"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","file":"angular-eve-resource.min.js","sourcesContent":[";(function (angular, window, document, undefined) {\n    'use strict';\n\nangular.module('com.dailymotion.ngEveResource', [\n    'ngResource'\n]);\n\nangular.module('com.dailymotion.ngEveResource')\n    .service('eve', function () {\n        function obj (key, comp, val) {\n            var o = {};\n            if (arguments.length === 3) {\n                (o[key] = {})[comp] = val;\n            } else  {\n                o[key] = comp;\n            }\n            return o;\n        }\n\n        function prepareArgs () {\n            var args = angular.isArray(arguments[0]) ? arguments[0] : Array.prototype.slice.call(arguments);\n            return args.map(function (arg) {\n                if (angular.isFunction(arg)) {\n                    return arg();\n                }\n                return arg;\n            }).filter(function (arg) {\n                return !!arg;\n            });\n        }\n\n        function simplify (conds, key) {\n            var newCond = [];\n\n            angular.forEach(conds, function (cond) {\n                if (cond[key]) {\n                    newCond = [].concat(newCond, simplify(cond[key], key));\n                } else {\n                    newCond.push(cond);\n                }\n            });\n\n            return newCond;\n        }\n\n        function isDefined (val) {\n            if (angular.isUndefined(val)) {\n                return false;\n            }\n            if (angular.isString(val)) {\n                return val.length > 0;\n            }\n            return true;\n        }\n\n        function regexValue (val, match) {\n            if (angular.isFunction(match)) {\n                return match(val);\n            } else if (match === 'pre') {\n                return [\n                    '.*?',\n                    val,\n                ].join('');\n            } else if (match === 'post') {\n                return [\n                    val,\n                    '.*?',\n                ].join('');\n            } else if (match === 'wrap') {\n                return [\n                    '.*?',\n                    val,\n                    '.*?',\n                ].join('');\n            }\n            return val;\n        }\n\n        function regex (key, val, match) {\n            if (isDefined(key) && val) {\n                return obj(key, '$regex', regexValue(val, match));\n            }\n        }\n\n        function numComparison (comp) {\n            return function (key, num) {\n                if (angular.isNumber(num)) {\n                    return obj(key, comp, num);\n                }\n            };\n        }\n\n        this.query = {\n            $and: function () {\n                var cond = simplify(prepareArgs.apply(null, arguments), '$and');\n                return cond.length > 1 ? obj('$and', cond) : cond[0];\n            },\n            $or: function () {\n                var cond = simplify(prepareArgs.apply(null, arguments), '$or');\n                return cond.length > 1 ? obj('$or', cond) : cond[0];\n            },\n            $eq: function (key, val) {\n                if (isDefined(key) && isDefined(val)) {\n                    return obj(key, val);\n                }\n            },\n            $ne: function (key, val) {\n                if (isDefined(key) && isDefined(val)) {\n                    return obj(key, '$ne', val);\n                }\n            },\n            $in: function (key, val) {\n                if (isDefined(key) && angular.isArray(val)) {\n                    return obj(key, '$in', val);\n                }\n            },\n            $nin: function (key, val) {\n                if (isDefined(key) && angular.isArray(val)) {\n                    return obj(key, '$nin', val);\n                }\n            },\n            // deprecated alias. Use $regex.\n            $like: regex,\n            $regex: regex,\n            $gt: numComparison('$gt'),\n            $gte: numComparison('$gte'),\n            $lt: numComparison('$lt'),\n            $lte: numComparison('$lte'),\n        };\n    });\n\nangular.module('com.dailymotion.ngEveResource')\n    .provider('eveResource', function () {\n        var cfg = {\n            'dateformat': 'YYYY-MM-DDTHH:mm:ss[Z]'\n        };\n\n        this.init = function (config) {\n            angular.merge(cfg, config);\n        };\n\n        this.$get = ['$window', '$resource', function ($window, $resource) {\n            function format (time, fmt) {\n                return $window.moment && $window.moment.utc ? $window.moment.utc(time).format(fmt || cfg.dateformat) : time;\n            }\n\n            function formatUpdated (fmt) {\n                return format(this._updated, fmt);\n            }\n\n            function formatCreated (fmt) {\n                return format(this._created, fmt);\n            }\n\n            return function (url, paramDefaults, actions, options, toJsonReplacer) {\n                var Resource,\n                    toJSON;\n\n                if (!angular.isFunction(toJsonReplacer)) {\n                    if (angular.isFunction(options)) {\n                        toJsonReplacer = options;\n                        options = {};\n                    } else {\n                        toJsonReplacer = function(key, value) {\n                            return value;\n                        };\n                    }\n                }\n\n                Resource = $resource(url, paramDefaults, actions, options);\n\n                toJSON = Resource.prototype.toJSON;\n\n                Resource.prototype.toJSON = function() {\n                    var data = toJSON.call(this);\n\n                    angular.forEach(data, function(value, key) {\n                        data[key] = key.charAt(0) === '_' ? undefined : toJsonReplacer(key, value);\n                    });\n\n                    return data;\n                };\n\n                Resource.prototype.exists = function() {\n                    return !!this._id;\n                };\n\n                Resource.prototype.formatUpdated = formatUpdated;\n                Resource.prototype.formatCreated = formatCreated;\n\n                return Resource;\n            };\n        }];\n    });\n\n}(this.angular, this, this.document));\n"],"sourceRoot":"/source/"}